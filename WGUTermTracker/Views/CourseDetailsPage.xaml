<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WGUTermTracker.Views.CourseDetailsPage"
             Title="Course Details">
    <Grid>
        <ScrollView>
            <VerticalStackLayout
            Padding="20"
            Spacing="15"
            Margin="0, 0, 0, 45">

                <!-- Title -->
                <Label
                x:Name="courseTitleLabel"
                Style="{StaticResource PageHeaderStyle}" />

                <Grid
                    Padding="10"
                    ColumnDefinitions="Auto, *"
                    RowDefinitions="Auto, Auto, Auto, Auto">

                    <!-- Start Date Row -->
                    <Label
                        Text="Start Date:"
                        TextColor="#0066A2"
                        Margin="0, 0, 10, 0"
                        FontSize="18"
                        Grid.Row="0"
                        Grid.Column="0"
                        VerticalOptions="Center" />
                    <Label
                        x:Name="courseStartDateValue"
                        Text=""
                        FontSize="18"
                        Grid.Row="0"
                        Grid.Column="1"
                        VerticalOptions="Center" />

                    <!-- End Date Row -->
                    <Label
                        Text="End Date:"
                        TextColor="#0066A2"
                        FontSize="18"
                        Grid.Row="1"
                        Grid.Column="0"
                        VerticalOptions="Center" />
                    <Label
                        x:Name="courseEndDateValue"
                        Text=""
                        FontSize="18"
                        Grid.Row="1"
                        Grid.Column="1"
                        VerticalOptions="Center" />

                    <!-- Status Row -->
                    <Label
                        Text="Status:"
                        TextColor="#0066A2"
                        FontSize="18"
                        Grid.Row="2"
                        Grid.Column="0"
                        VerticalOptions="Center" />
                    <Label
                        x:Name="courseStatusValue"
                        Text=""
                        FontSize="18"
                        Grid.Row="2"
                        Grid.Column="1"
                        VerticalOptions="Center" />

                    <!-- Notes Row -->
                    <Label
                        Text="Notes:"
                        TextColor="#0066A2"
                        FontSize="18"
                        Grid.Row="3"
                        Grid.Column="0"
                        VerticalOptions="Start" />
                    <Label
                        x:Name="courseNotesValue"
                        Text=""
                        FontSize="18"
                        Grid.Row="3"
                        Grid.Column="1"
                        VerticalOptions="Center" />
                </Grid>
                
                <Button 
                    Text="Share Course Notes"
                    Clicked="OnShareNotesButtonClicked"
                    HorizontalOptions="Center"
                    Padding="60, 0"
                    Style="{StaticResource PageAddButtonStyle}"/>
                <HorizontalStackLayout Spacing="10">
                    <Label 
                        Text="Notifications Enabled: "
                        TextColor="#0066A2"
                        FontSize="18"
                        VerticalOptions="Center"/>
                    <CheckBox 
                        x:Name="courseEnableNotificationsCheckBox"
                        IsEnabled="False" 
                        VerticalOptions="Center"/>
                </HorizontalStackLayout>
                <Label 
                    Text="Instructor Information:"
                    TextDecorations="Underline"
                    HorizontalOptions="Center"
                    Style="{StaticResource PageSubHeaderStyle}"/>
                <Grid
                    Padding="10"
                    ColumnDefinitions="Auto, *"
                    RowDefinitions="Auto, Auto, Auto">

                    <Label 
                        Text="Name: "
                        Grid.Row="0"
                        Grid.Column="0"
                        TextColor="#0066A2"
                        FontSize="18"/>
                    <Label 
                        x:Name="courseInstructorNameLabel"
                        Grid.Row="0"
                        Grid.Column="1"
                        FontSize="18" />
                    <Label 
                        Text="Phone: "
                        Grid.Row="1"
                        Grid.Column="0"
                        TextColor="#0066A2"
                        FontSize="18"/>
                    <Label 
                        x:Name="courseInstructorPhoneLabel"
                        Grid.Row="1"
                        Grid.Column="1"
                        FontSize="18" />
                    <Label 
                        Text="Email: "
                        Grid.Row="2"
                        Grid.Column="0"
                        TextColor="#0066A2"
                        FontSize="18"/>
                    <Label 
                        x:Name="courseInstructorEmailLabel"
                        Grid.Row="2"
                        Grid.Column="1"
                        FontSize="18" />
                </Grid>
                
                <BoxView 
                HeightRequest="1"
                Color="DodgerBlue"
                Margin="0,12" />

                <Label 
                Text="Current Assessments:"
                TextDecorations="Underline"
                HorizontalOptions="Center"
                FontSize="18"
                Style="{StaticResource PageSubHeaderStyle}" />

                <HorizontalStackLayout 
                HorizontalOptions="Center"
                Spacing="20">

                    <Button 
                    Text="Add"
                    Clicked="OnAddAssessmentButtonClicked" 
                    Style="{StaticResource PageAddButtonStyle}"/>
                    <Button 
                    Text="View"
                    Clicked="OnViewAssessmentButtonClicked" 
                    Style="{StaticResource PageViewButtonStyle}"/>
                    <Button 
                    Text="Update"
                    Clicked="OnUpdateAssessmentButtonClicked"
                    Style="{StaticResource PageUpdateButtonStyle}"/>
                    <Button 
                    Text="Delete"
                    Clicked="OnDeleteAssessmentButtonClicked"
                    Style="{StaticResource PageDeleteButtonStyle}"/>
                </HorizontalStackLayout>

                <!-- Assessments List -->
                <CollectionView
                x:Name="assessmentsCollectionView"
                ItemsSource="{Binding Assessments}"
                SelectionMode="Single"
                SelectionChanged="OnAssessmentSelected">

                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <VerticalStackLayout>
                                <Grid
                                    Padding="12"
                                    Margin="0,6"
                                    ColumnDefinitions="*,Auto,Auto"
                                    RowDefinitions="Auto">

                                    <Label
                                        Text="{Binding Title}"
                                        FontSize="14"
                                        VerticalOptions="Center"
                                        Grid.Column="0"
                                        Style="{StaticResource PropertyLabelStyle}"/>

                                    <Label
                                        Text="{Binding StartDate, StringFormat='Start: {0:MM/dd/yyyy}'}"
                                        FontSize="12"
                                        VerticalOptions="Center"
                                        Grid.Column="1"
                                        Margin="12,0" />

                                    <Label
                                        Text="{Binding EndDate, StringFormat='End: {0:MM/dd/yyyy}'}"
                                        FontSize="12"
                                        VerticalOptions="Center"
                                        Grid.Column="2"
                                        Margin="12,0" />
                                </Grid>

                                <BoxView
                                    HeightRequest="1"
                                    Color="DodgerBlue"
                                    HorizontalOptions="Center"
                                    WidthRequest="300" />
                            </VerticalStackLayout>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </ScrollView>

        <Button
        Text="Cancel"
        Style="{StaticResource PageCancelButtonStyle}"
        HorizontalOptions="End"
        VerticalOptions="End"
        Margin="20"
        Clicked="OnCancelButtonClicked"/>
    </Grid>
</ContentPage>